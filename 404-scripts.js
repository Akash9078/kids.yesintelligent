function animateErrorNumbers(){document.querySelectorAll(".error-number").forEach(((e,t)=>{setTimeout((()=>{e.style.animation="bounce 0.6s ease-out"}),200*t)}))}function track404Error(){"undefined"!=typeof gtag&&(gtag("event","page_view",{page_title:"404 - Page Not Found",page_location:window.location.href}),gtag("event","404_error",{attempted_url:window.location.href,referrer:document.referrer,user_agent:navigator.userAgent,timestamp:(new Date).toISOString(),page_title:document.title,screen_resolution:`${screen.width}x${screen.height}`,viewport_size:`${window.innerWidth}x${window.innerHeight}`}),gtag("event","generate_lead",{currency:"USD",value:0,source:"404_page"})),"undefined"!=typeof fbq&&(fbq("track","PageView"),fbq("track","ViewContent",{content_type:"error_page",content_ids:["404"],content_name:"Page Not Found"})),"undefined"!=typeof _paq&&(_paq.push(["trackPageView","404 - Page Not Found"]),_paq.push(["trackEvent","Error","404",window.location.href])),"undefined"!=typeof clarity&&clarity("event","404_error")}function logErrorDetails(){console.group("📊 404 Error Details"),console.log("Attempted URL:",window.location.href),console.log("Referrer:",document.referrer||"Direct visit or unknown"),console.log("User Agent:",navigator.userAgent),console.log("Timestamp:",(new Date).toISOString()),console.log("Screen Resolution:",`${screen.width}x${screen.height}`),console.log("Viewport Size:",`${window.innerWidth}x${window.innerHeight}`),console.groupEnd()}function reportBrokenLink(){const e=window.location.href,t=document.referrer,n=(new Date).toLocaleString(),o=navigator.userAgent,r=`mailto:support@kids.yesintelligent.com?subject=${encodeURIComponent("Broken Link Report - Kids Worksheets")}&body=${encodeURIComponent(`Hi there!\n\nI found a broken link on your Kids Worksheets website:\n\n📍 BROKEN URL: ${e}\n🔗 CAME FROM: ${t||"Direct visit or unknown"}\n📅 DATE/TIME: ${n}\n💻 BROWSER: ${o}\n\nPlease fix this link when you have a chance.\n\nThanks for the great educational resources!`)}`;try{window.open(r),showReportConfirmation(),trackBrokenLinkReport(e,t)}catch(o){console.error("Error opening email client:",o),copyReportToClipboard(e,t,n)}}function showReportConfirmation(){const e=document.querySelector(".report-link");if(e){const t=e.textContent;e.textContent="✅ Thanks for reporting!",e.style.color="#22c55e",setTimeout((()=>{e.textContent=t,e.style.color="#22d3ee"}),3e3)}}function copyReportToClipboard(e,t,n){const o=`Broken Link Report - Kids Worksheets\n\nBroken URL: ${e}\nCame from: ${t||"Direct visit or unknown"}\nDate/Time: ${n}\n\nPlease send this to: support@kids.yesintelligent.com`;if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(o).then((()=>{alert("Report details copied to clipboard! Please paste and send to support@kids.yesintelligent.com")}));else{const e=document.createElement("textarea");e.value=o,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("Report details copied to clipboard! Please paste and send to support@kids.yesintelligent.com")}}function trackBrokenLinkReport(e,t){"undefined"!=typeof gtag&&gtag("event","broken_link_reported",{attempted_url:e,referrer:t,report_method:"email"}),console.log("📧 Broken link reported:",e)}function trackSpecificError(){const e=window.location.href.toLowerCase();let t="general_404";e.includes("wp-")||e.includes("admin")?t="admin_attempt":e.includes("blog")||e.includes("post")?t="blog_content":e.includes("worksheet")||e.includes("math")||e.includes("reading")?t="worksheet_search":(e.includes("pricing")||e.includes("buy")||e.includes("purchase"))&&(t="commerce_intent"),"undefined"!=typeof gtag&&gtag("event","404_categorized",{error_type:t,attempted_url:window.location.href})}function initializeSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})}))}))}function initializeLazyLoading(){if("IntersectionObserver"in window){const e=new IntersectionObserver(((t,n)=>{t.forEach((t=>{if(t.isIntersecting){const n=t.target;n.src=n.dataset.src,n.classList.remove("lazy"),e.unobserve(n)}}))}));document.querySelectorAll("img[data-src]").forEach((t=>{e.observe(t)}))}}function enhanceSEOFeatures(){addSearchActionStructuredData(),trackInternalLinkClicks(),enhanceExternalLinks(),monitorPagePerformance()}function addSearchActionStructuredData(){const e=document.createElement("script");e.type="application/ld+json",e.textContent=JSON.stringify({"@context":"https://schema.org","@type":"WebSite",url:"https://kids.yesintelligent.com/",potentialAction:{"@type":"SearchAction",target:{"@type":"EntryPoint",urlTemplate:"https://kids.yesintelligent.com/?s={search_term_string}"},"query-input":"required name=search_term_string"}}),document.head.appendChild(e)}function trackInternalLinkClicks(){document.querySelectorAll('a[href^="/"], a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(){const e=this.getAttribute("href");"undefined"!=typeof gtag&&gtag("event","click",{event_category:"internal_link",event_label:e,transport_type:"beacon",source_page:"404"})}))}))}function enhanceExternalLinks(){document.querySelectorAll('a[href^="http"]:not([href*="kids.yesintelligent.com"])').forEach((e=>{e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank")}))}function monitorPagePerformance(){"performance"in window&&"timing"in window.performance&&window.addEventListener("load",(function(){setTimeout((function(){const e=window.performance.timing,t=e.loadEventEnd-e.navigationStart,n=e.domContentLoadedEventEnd-e.navigationStart;"undefined"!=typeof gtag&&gtag("event","timing_complete",{name:"load",value:t,custom_parameter:{page_type:"404",dom_ready_time:n}}),console.log(`📊 404 Page Performance: Load ${t}ms, DOM Ready ${n}ms`)}),0)}))}function trackPagePerformance(){"PerformanceObserver"in window&&(new PerformanceObserver((e=>{const t=e.getEntries(),n=t[t.length-1];"undefined"!=typeof gtag&&gtag("event","web_vitals",{metric_name:"LCP",metric_value:Math.round(n.startTime),page_type:"404"})})).observe({entryTypes:["largest-contentful-paint"]}),new PerformanceObserver((e=>{e.getEntries().forEach((e=>{"undefined"!=typeof gtag&&gtag("event","web_vitals",{metric_name:"FID",metric_value:Math.round(e.processingStart-e.startTime),page_type:"404"})}))})).observe({entryTypes:["first-input"]}))}document.addEventListener("DOMContentLoaded",(function(){animateErrorNumbers(),track404Error(),logErrorDetails()})),document.addEventListener("DOMContentLoaded",(function(){trackSpecificError(),initializeSmoothScrolling(),initializeLazyLoading(),enhanceSEOFeatures(),trackPagePerformance()})),window.reportBrokenLink=reportBrokenLink;