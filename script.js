let ticking=!1;const observerOptions={threshold:.1,rootMargin:"0px 0px -50px 0px"},observer=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&e.target.classList.add("visible")}))}),observerOptions);function initSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();let t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})}))}))}function initButtonEffects(){document.querySelectorAll("button").forEach((e=>{e.addEventListener("mouseenter",(function(){this.style.transform="translateY(-2px)"})),e.addEventListener("mouseleave",(function(){this.style.transform="translateY(0)"}))}))}function initCardEffects(){document.querySelectorAll(".feature-card, .testimonial-card").forEach((e=>{e.addEventListener("mousemove",(t=>{let n=e.getBoundingClientRect(),o=t.clientX-n.left,a=t.clientY-n.top,r=n.width/2,i=n.height/2;e.style.transform=`perspective(1000px) rotateX(${(a-i)/10}deg) rotateY(${(r-o)/10}deg) translateY(-8px) scale(1.02)`})),e.addEventListener("mouseleave",(()=>{e.style.transform="perspective(1000px) rotateX(0deg) rotateY(0deg) translateY(0px) scale(1)"}))}))}function initFloatingAnimations(){document.querySelectorAll(".animate-float, .animate-bounce-slow, .animate-pulse-slow").forEach((e=>{e.style.animationDelay=3*Math.random()+"s"}))}function animateCounter(e,t,n=2e3){let o=0,a=t/(n/16),r=setInterval((()=>{(o+=a)>=t?(e.textContent=t.toLocaleString()+"+",clearInterval(r)):e.textContent=Math.floor(o).toLocaleString()+"+"}),16)}function initCounterAnimations(){let e=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&!e.target.dataset.animated&&(e.target.dataset.animated="true",e.target.textContent.includes("12,000")?animateCounter(e.target,12e3):e.target.textContent.includes("5,000")&&animateCounter(e.target,5e3))}))}));document.querySelectorAll(".footer-stat-value:not([data-animated])").forEach((t=>{(t.textContent.includes("12,000")||t.textContent.includes("5,000"))&&e.observe(t)}))}function updateScrollEffects(){let e=-.5*window.pageYOffset;document.querySelectorAll(".absolute").forEach(((t,n)=>{t.classList.contains("animate-float")&&(t.style.transform=`translateY(${e*(n+1)*.1}px)`)})),ticking=!1}function openSampleModal(){let e=document.getElementById("sampleModal"),t=window.innerWidth-document.documentElement.clientWidth;document.body.style.paddingRight=t+"px",document.body.style.overflow="hidden",e.classList.add("active")}function closeSampleModal(e){if(e&&e.target!==e.currentTarget&&!e.target.closest('[onclick="closeSampleModal()"]'))return;document.getElementById("sampleModal").classList.remove("active"),document.body.style.paddingRight="",document.body.style.overflow=""}function handleSampleSubmit(e){e.preventDefault();let t=e.target,n=t.parentName.value,o=t.parentEmail.value,a=t.querySelector('button[type="submit"]'),r=a.innerHTML;a.innerHTML="🔄 Sending...",a.disabled=!0;let i={name:n,email:o,type:"sample_request",timestamp:(new Date).toISOString(),source:"kids_worksheets_landing_page"};fetch("https://n8ndroplet.yesintelligent.com/webhook/ab9cf5b8-9ec2-4741-99a4-5f85e2158216",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((e=>{if(!e.ok)throw Error("Network response was not ok");a.innerHTML="✅ Success! Check Your Email",a.style.background="linear-gradient(90deg, #22c55e, #16a34a)",setTimeout((()=>{alert(`🎉 SUCCESS!\n\nHi ${n}!\n\nYour FREE sample worksheets are on their way to ${o}!\n\nCheck your inbox in the next few minutes (don't forget to check spam folder).\n\n📚 You'll receive:\n• 10 Premium sample worksheets\n• Math, Reading & Science activities\n• Weekly educational tips\n• Exclusive parent resources\n\nThank you for choosing KidsWorksheets! 💝`),closeSampleModal(),setTimeout((()=>{t.reset(),a.innerHTML=r,a.disabled=!1,a.style.background=""}),500)}),1e3),console.log("Sample request submitted successfully:",i)})).catch((e=>{console.error("Error submitting form:",e),a.innerHTML="❌ Error - Please Try Again",a.style.background="linear-gradient(90deg, #ef4444, #dc2626)",setTimeout((()=>{a.innerHTML=r,a.disabled=!1,a.style.background=""}),3e3),alert("⚠️ Something went wrong!\n\nPlease check your internet connection and try again.\n\nIf the problem persists, please contact our support team.")}))}function handleContactSubmit(e){e.preventDefault();let t=e.target,n=t.contactName.value,o=t.contactEmail.value,a=t.contactMessage.value,r=t.querySelector('button[type="submit"]'),i=r.innerHTML;r.innerHTML="🔄 Sending...",r.disabled=!0;let l={name:n,email:o,message:a,type:"contact_form",timestamp:(new Date).toISOString(),source:"kids_worksheets_landing_page"};fetch("https://n8ndroplet.yesintelligent.com/webhook/99f7be89-af8d-48ab-9f59-1812bfaca3e3",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((e=>{if(!e.ok)throw Error("Network response was not ok");r.innerHTML="✅ Message Sent!",t.reset(),setTimeout((()=>{r.innerHTML=i,r.disabled=!1}),3e3)})).catch((e=>{console.error("Error:",e),r.innerHTML=i,r.disabled=!1,alert("There was an error sending your message. Please try again or contact us directly.")}))}function openPrivacyModal(){let e=document.getElementById("privacyModal"),t=window.innerWidth-document.documentElement.clientWidth;document.body.style.paddingRight=t+"px",document.body.style.overflow="hidden",e.classList.add("active")}function closePrivacyModal(e){if(e&&e.target!==e.currentTarget&&!e.target.closest('[onclick="closePrivacyModal()"]'))return;document.getElementById("privacyModal").classList.remove("active"),document.body.style.paddingRight="",document.body.style.overflow=""}function openTermsModal(){let e=document.getElementById("termsModal"),t=window.innerWidth-document.documentElement.clientWidth;document.body.style.paddingRight=t+"px",document.body.style.overflow="hidden",e.classList.add("active")}function closeTermsModal(e){if(e&&e.target!==e.currentTarget&&!e.target.closest('[onclick="closeTermsModal()"]'))return;document.getElementById("termsModal").classList.remove("active"),document.body.style.paddingRight="",document.body.style.overflow=""}function openRefundModal(){let e=document.getElementById("refundModal"),t=window.innerWidth-document.documentElement.clientWidth;document.body.style.paddingRight=t+"px",document.body.style.overflow="hidden",e.classList.add("active")}function closeRefundModal(e){if(e&&e.target!==e.currentTarget&&!e.target.closest('[onclick="closeRefundModal()"]'))return;document.getElementById("refundModal").classList.remove("active"),document.body.style.paddingRight="",document.body.style.overflow=""}function throttle(e,t){let n,o=0;return function(...a){let r=Date.now();r-o>t?(e.apply(this,a),o=r):(clearTimeout(n),n=setTimeout((()=>{e.apply(this,a),o=Date.now()}),t-(r-o)))}}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".observer-element").forEach((e=>observer.observe(e))),initSmoothScrolling(),initButtonEffects(),initCardEffects(),initFloatingAnimations(),initCounterAnimations()})),document.addEventListener("scroll",(()=>{ticking||(requestAnimationFrame(updateScrollEffects),ticking=!0)})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&(closeSampleModal(),closePrivacyModal(),closeTermsModal(),closeRefundModal())}));const throttledScrollHandler=throttle((()=>{updateScrollEffects()}),16);function handlePurchaseClick(){try{"undefined"!=typeof gtag&&gtag("event","purchase_click",{event_category:"engagement",event_label:"footer_cta_button"}),window.open("https://yesintelligent.gumroad.com/l/kids-activity-kit","_blank")}catch(e){console.error("Error handling purchase click:",e),window.location.href="https://yesintelligent.gumroad.com/l/kids-activity-kit"}}document.addEventListener("scroll",throttledScrollHandler);