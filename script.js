let ticking=!1;const observerOptions={threshold:.1,rootMargin:"0px 0px -50px 0px"},observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("visible")})},observerOptions);function initSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})})}function initButtonEffects(){let e=document.querySelectorAll("button");e.forEach(e=>{e.addEventListener("mouseenter",function(){this.style.transform="translateY(-2px)"}),e.addEventListener("mouseleave",function(){this.style.transform="translateY(0)"})})}function initCardEffects(){let e=document.querySelectorAll(".feature-card, .testimonial-card");e.forEach(e=>{e.addEventListener("mousemove",t=>{let n=e.getBoundingClientRect(),o=t.clientX-n.left,a=t.clientY-n.top,l=n.width/2,r=n.height/2;e.style.transform=`perspective(1000px) rotateX(${(a-r)/10}deg) rotateY(${(l-o)/10}deg) translateY(-8px) scale(1.02)`}),e.addEventListener("mouseleave",()=>{e.style.transform="perspective(1000px) rotateX(0deg) rotateY(0deg) translateY(0px) scale(1)"})})}function initFloatingAnimations(){let e=document.querySelectorAll(".animate-float, .animate-bounce-slow, .animate-pulse-slow");e.forEach(e=>{e.style.animationDelay=3*Math.random()+"s"})}function animateCounter(e,t,n=2e3){let o=0,a=t/(n/16),l=setInterval(()=>{(o+=a)>=t?(e.textContent=t.toLocaleString()+"+",clearInterval(l)):e.textContent=Math.floor(o).toLocaleString()+"+"},16)}function initCounterAnimations(){let e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!e.target.dataset.animated&&(e.target.dataset.animated="true",e.target.textContent.includes("12,000")?animateCounter(e.target,12e3):e.target.textContent.includes("5,000")&&animateCounter(e.target,5e3))})}),t=document.querySelectorAll(".footer-stat-value:not([data-animated])");t.forEach(t=>{(t.textContent.includes("12,000")||t.textContent.includes("5,000"))&&e.observe(t)})}function updateScrollEffects(){let e=window.pageYOffset,t=-.5*e,n=document.querySelectorAll(".absolute");n.forEach((e,n)=>{e.classList.contains("animate-float")&&(e.style.transform=`translateY(${t*(n+1)*.1}px)`)}),ticking=!1}function openSampleModal(){let e=document.getElementById("sampleModal"),t=window.innerWidth-document.documentElement.clientWidth;document.body.style.paddingRight=t+"px",document.body.style.overflow="hidden",e.classList.add("active")}function closeSampleModal(e){if(e&&e.target!==e.currentTarget&&!e.target.closest('[onclick="closeSampleModal()"]'))return;let t=document.getElementById("sampleModal");t.classList.remove("active"),document.body.style.paddingRight="",document.body.style.overflow=""}function handleSampleSubmit(e){e.preventDefault();let t=e.target,n=t.parentName.value,o=t.parentEmail.value,a=t.querySelector('button[type="submit"]'),l=a.innerHTML;a.innerHTML="\uD83D\uDD04 Sending...",a.disabled=!0;let r={name:n,email:o,type:"sample_request",timestamp:new Date().toISOString(),source:"kids_worksheets_landing_page"};fetch("https://n8ndroplet.yesintelligent.com/webhook/ab9cf5b8-9ec2-4741-99a4-5f85e2158216",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(e=>{if(e.ok)a.innerHTML="✅ Success! Check Your Email",a.style.background="linear-gradient(90deg, #22c55e, #16a34a)",setTimeout(()=>{alert(`🎉 SUCCESS!

Hi ${n}!

Your FREE sample worksheets are on their way to ${o}!

Check your inbox in the next few minutes (don't forget to check spam folder).

📚 You'll receive:
• 10 Premium sample worksheets
• Math, Reading & Science activities
• Weekly educational tips
• Exclusive parent resources

Thank you for choosing KidsWorksheets! 💝`),closeSampleModal(),setTimeout(()=>{t.reset(),a.innerHTML=l,a.disabled=!1,a.style.background=""},500)},1e3),console.log("Sample request submitted successfully:",r);else throw Error("Network response was not ok")}).catch(e=>{console.error("Error submitting form:",e),a.innerHTML="❌ Error - Please Try Again",a.style.background="linear-gradient(90deg, #ef4444, #dc2626)",setTimeout(()=>{a.innerHTML=l,a.disabled=!1,a.style.background=""},3e3),alert("⚠️ Something went wrong!\n\nPlease check your internet connection and try again.\n\nIf the problem persists, please contact our support team.")})}function handleContactSubmit(e){e.preventDefault();let t=e.target,n=t.contactName.value,o=t.contactEmail.value,a=t.contactMessage.value,l=t.querySelector('button[type="submit"]'),r=l.innerHTML;l.innerHTML="\uD83D\uDD04 Sending...",l.disabled=!0;let i={name:n,email:o,message:a,type:"contact_form",timestamp:new Date().toISOString(),source:"kids_worksheets_landing_page"};fetch("https://n8ndroplet.yesintelligent.com/webhook/99f7be89-af8d-48ab-9f59-1812bfaca3e3",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(e=>{if(e.ok)l.innerHTML="✅ Message Sent!",t.reset(),setTimeout(()=>{l.innerHTML=r,l.disabled=!1},3e3);else throw Error("Network response was not ok")}).catch(e=>{console.error("Error:",e),l.innerHTML=r,l.disabled=!1,alert("There was an error sending your message. Please try again or contact us directly.")})}function openPrivacyModal(){let e=document.getElementById("privacyModal"),t=window.innerWidth-document.documentElement.clientWidth;document.body.style.paddingRight=t+"px",document.body.style.overflow="hidden",e.classList.add("active")}function closePrivacyModal(e){if(e&&e.target!==e.currentTarget&&!e.target.closest('[onclick="closePrivacyModal()"]'))return;let t=document.getElementById("privacyModal");t.classList.remove("active"),document.body.style.paddingRight="",document.body.style.overflow=""}function openTermsModal(){let e=document.getElementById("termsModal"),t=window.innerWidth-document.documentElement.clientWidth;document.body.style.paddingRight=t+"px",document.body.style.overflow="hidden",e.classList.add("active")}function closeTermsModal(e){if(e&&e.target!==e.currentTarget&&!e.target.closest('[onclick="closeTermsModal()"]'))return;let t=document.getElementById("termsModal");t.classList.remove("active"),document.body.style.paddingRight="",document.body.style.overflow=""}function openRefundModal(){let e=document.getElementById("refundModal"),t=window.innerWidth-document.documentElement.clientWidth;document.body.style.paddingRight=t+"px",document.body.style.overflow="hidden",e.classList.add("active")}function closeRefundModal(e){if(e&&e.target!==e.currentTarget&&!e.target.closest('[onclick="closeRefundModal()"]'))return;let t=document.getElementById("refundModal");t.classList.remove("active"),document.body.style.paddingRight="",document.body.style.overflow=""}function throttle(e,t){let n,o=0;return function(...a){let l=Date.now();l-o>t?(e.apply(this,a),o=l):(clearTimeout(n),n=setTimeout(()=>{e.apply(this,a),o=Date.now()},t-(l-o)))}}document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelectorAll(".observer-element");e.forEach(e=>observer.observe(e)),initSmoothScrolling(),initButtonEffects(),initCardEffects(),initFloatingAnimations(),initCounterAnimations()}),document.addEventListener("scroll",()=>{ticking||(requestAnimationFrame(updateScrollEffects),ticking=!0)}),document.addEventListener("keydown",e=>{"Escape"===e.key&&(closeSampleModal(),closePrivacyModal(),closeTermsModal(),closeRefundModal())});const throttledScrollHandler=throttle(()=>{updateScrollEffects()},16);function handlePurchaseClick(){try{"undefined"!=typeof gtag&&gtag("event","purchase_click",{event_category:"engagement",event_label:"footer_cta_button"}),window.open("https://yesintelligent.gumroad.com/l/kids-activity-kit","_blank")}catch(e){console.error("Error handling purchase click:",e),window.location.href="https://yesintelligent.gumroad.com/l/kids-activity-kit"}}document.addEventListener("scroll",throttledScrollHandler);